---
title: VÃ­ dá»¥ sá»­ dá»¥ng trÃ¹ng láº·p cÃ¡c phiÃªn báº£n cá»§a cÃ¹ng package Ä‘Æ°á»£c phÃ¡t hiá»‡n qua Statoscope
date: '2024-10-04'
tags: ['webpack', 'statoscope']
draft: true
summary: Khi xÃ¢y dá»±ng má»™t website, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng trÃ¹ng láº·p dependency package mÃ  khÃ´ng Ä‘á»ƒ Ã½. Äiá»u Ä‘Ã³ sáº½ lÃ m tÄƒng kÃ­ch thá»©c bundle. Äáº·c biáº¿t trong trÆ°á»ng há»£p sá»± trÃ¹ng láº·p xáº£y ra á»Ÿ initial chunks. Statoscope cÃ³ kháº£ nÄƒng phÃ¡t hiá»‡n vÃ  chá»‰ ra Ä‘iá»u Ä‘Ã³
---

[source code](https://github.com/haingdc/webpack-sample-cho-blog/tree/ban-voi-duplicate-dependency-packages)

ÄÃ´i khi báº¡n cÃ³ thá»ƒ gáº·p trÆ°á»ng há»£p bá»‹ trÃ¹ng láº·p package do cÃ¡c dependencies package sá»­ dá»¥ng cÃ¡c phiÃªn báº£n khÃ¡c nhau cá»§a cÃ¹ng má»™t package.

Báº¯t Ä‘áº§u, mÃ¬nh sáº½ táº¡o vÃ  phÃ¡t hÃ nh 2 package thÃ´ng qua jsr.io thay vÃ¬ NPM. CÃ³ thá»ƒ coi JSR lÃ  báº£n má»Ÿ rá»™ng cá»§a NPM tÆ°Æ¡ng tá»± nhÆ° Typescript vá»›i Javascript - theo nhÆ° Ryan Dahl cha Ä‘áº» cá»§a NodeJs nÃ³i vá» nÃ³ trong 1 há»™i tháº£o cá»§a áº£nh trÃªn youtube.

Báº¡n cÃ³ thá»ƒ coi video nÃ y náº¿u cáº£m tháº¥y há»©ng thÃº [link video](https://www.youtube.com/watch?v=MFCn4ce5dVc)

2 package nÃ y láº§n lÆ°á»£t lÃ : [@hn/one-true-date](https://jsr.io/@hn/one-true-date) vÃ  [@hn/one-true-date-verpa-xi-khoi](https://jsr.io/@hn/one-true-date-verpa-xi-khoi). Má»™t cÃ¡i cÃ³ dependency lÃ  date-fns version 2.30.0 vÃ  4.1.0

Báº¡n thÃªm vÃ o package vÃ  sá»­ dá»¥ng nhÆ° sau:

```terminal
yarn dlx jsr add @hn/one-true-date
yarn dlx jsr add @hn/one-true-date-verpa-xi-khoi
```

```ts
import { oneTrueDate } from "@hn/one-true-date";
import { oneTrueDate as oneTrueDateXiKhoi } from "@hn/one-true-date-verpa-xi-khoi";

console.log(oneTrueDate(new Date()));
console.log(oneTrueDateXiKhoi(new Date()));
```

Láº­p tá»©c, Statoscope chá»‰ ra nÆ¡i trÃ¹ng láº·p lÃ  2 package Ä‘Ã³.

![trÃ¹ng láº·p xáº£y ra á»Ÿ 2 package one-true-date khi sá»­ dá»¥ng date-fns phiÃªn báº£n khÃ¡c nhau](/static/images/65052ffa-e333-44e8-b274-75bcfafbd0bf/e3fb8867566f41eda3b60a1a3831251e.png)

NguyÃªn do lÃ  hÃ m oneTrueDate Ä‘Æ°á»£c táº¡o ra dÃ¹ dÃ¹ng cÃ¹ng 1 code dÆ°á»›i nhÆ°ng khi install package Ä‘Æ°á»£c mÃ¬nh cá»‘ Ã½ chá»‰ Ä‘á»‹nh 2 version riÃªng. 

```ts
import { format } from 'date-fns';

/** the proper way to format date */
export function oneTrueDate(date: Date): string {
  return format(date, 'yyyy-MM-dd');
}
```

Äá»ƒ xem chi tiáº¿t, báº¡n cÃ³ thá»ƒ click vÃ o tá»«ng cÃ¡i Ä‘á»ƒ tháº¥y chi tiáº¿t hÆ¡n.

Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘á»c Ä‘Æ°á»£c bÃ i viáº¿t nÃ y nhen ğŸ¤—